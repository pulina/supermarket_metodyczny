{% extends "base/index.html" %}
{% block title %}Supermarket Metodyczny{% endblock %}
{% block content %}
        <div class="page-header">
          <h1>Na zakupy</h1>
        </div>
<br/>
	<p class="lead">Wybierz wiek:</p>
<br/>
<!--
	<div style="text-align: center;"></div>
	<p id="wartosc"></p>
-->
	 <input id='suwak' style="width:100%" type="range" value='0' min='0' max='{{max}}' onchange="setLabelPosition()"></input>
<br/>
<div class="row marketing">
        <div class="col-lg-6 ramki">
		<p class="lead" id='nazwa'></p>
		<p class="lead"><span id='wiek'></span>  <span id='stopien'></span></p>
		<p class="lead" id='opis'></p>
		<p class="lead">Możliwe funkcję:</p>
		<ul id='funkcje'>
		</ul>
        </div>

        <div class="col-lg-6 ramki">
		<p class="lead">Dostępne formy:</p>
		<p style='margin: 10px' id='formy'></p>
        </div>
      </div>
<script type="text/javascript">
		var etapy = new Array();
		{% load position_tags %}
		{% for obj in object_list|order_by_position %}
		etapy[{{ forloop.counter0 }}]={pk:"{{ obj.pk }}",nazwa:"{{ obj.nazwa }}",opis:"{{ obj.opis }}",wiek:"{{ obj.wiek_min }} - {{ obj.wiek_max }}",stopien:"{{ obj.get_stopien_display }}",funkcja:[{% for fun in obj.funkcja.all %}'{{fun}}',{% endfor %}]};
		{% endfor %}
    	function setLabelPosition(newValue) {
		var newValue = document.getElementById("suwak").value;
		//console.log(newValue)
		document.getElementById("wiek").innerHTML=etapy[newValue].wiek;
		document.getElementById("stopien").innerHTML=etapy[newValue].stopien;
		document.getElementById("opis").innerHTML=etapy[newValue].opis;
		document.getElementById("nazwa").innerHTML=etapy[newValue].nazwa;
		document.getElementById("funkcje").innerHTML= '';
		for (x in etapy[newValue].funkcja){
			document.getElementById("funkcje").innerHTML+='<li>'+etapy[newValue].funkcja[x]+'</li>';
		}
		$('#formy').load(Urls.formy(etapy[newValue].pk));
    	}
	setLabelPosition(0);
</script>
	{% endblock %}
